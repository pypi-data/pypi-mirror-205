#
#  This file is part of Sequana software
#
#  Copyright (c) 2016-2021 - Sequana Dev Team (https://sequana.readthedocs.io)
#
#
#  Distributed under the terms of the 3-clause BSD license.
#  The full license is in the LICENSE file, distributed with this software.
#
#  Website:       https://github.com/sequana/sequana
#  Documentation: http://sequana.readthedocs.io
#  Contributors:  https://github.com/sequana/sequana/graphs/contributors
##############################################################################


rule rulegraph:
    """Rulegraph 

     Required input:
         - Uses the manager.snakefile variable from Sequana manager

     Required output:
         - ".sequana/rulegraph.svg": the output SVG filename rulegraph/rulegraph.svg

     Required parameters:
        __rulegraph_mapper: a dictionary mapping each rule to a URL (HTML 
            file or directory). Rules provided in this dictionary will be shown 
            in blue and clickable in the ouptut SVG file. If not set, no clickable links 
            are shown

    Note1: a config.yaml is expected to be found in the directory.
    """
    input:
        filename = str(manager.snakefile)
    output:
        svg  = ".sequana/rulegraph.svg"
    params:
        mapper = globals().get("sequana_rulegraph_mapper", {}),
        configname = "config.yaml" # to move as an input in future releases
    message: """
    -- Creating rulegraph in a dot file and save into rulegraph.svg
    """
    wrapper:
        "main/wrappers/rulegraph"




