{"version":3,"file":"lib_index_js.95af1f24f73d35dc11c8.js","mappings":"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","sources":["webpack://jupyterlab-daw/./style/icons/mute.svg","webpack://jupyterlab-daw/./style/icons/pause.svg","webpack://jupyterlab-daw/./style/icons/play.svg","webpack://jupyterlab-daw/./style/icons/speaker.svg","webpack://jupyterlab-daw/./style/icons/stop.svg","webpack://jupyterlab-daw/./src/commands.ts","webpack://jupyterlab-daw/./src/components/meter.tsx","webpack://jupyterlab-daw/./src/components/transport.tsx","webpack://jupyterlab-daw/./src/iconimports.ts","webpack://jupyterlab-daw/./src/index.ts","webpack://jupyterlab-daw/./src/model.ts","webpack://jupyterlab-daw/./src/tokens.ts","webpack://jupyterlab-daw/./src/util/animation.tsx","webpack://jupyterlab-daw/./src/util/draw.tsx","webpack://jupyterlab-daw/./src/widgets/topbar.tsx"],"sourcesContent":["export default \"<?xml version=\\\"1.0\\\"?>\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.0\\\" width=\\\"500\\\" height=\\\"500\\\" viewBox=\\\"0 0 75 75\\\"\\nstroke=\\\"#111\\\" stroke-width=\\\"5\\\">\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\" stroke=\\\"#616161\\\">\\n    <path class=\\\"jp-icon3\\\" d=\\\"m39,14-17,15H6V48H22l17,15z\\\" stroke-linejoin=\\\"round\\\"/>\\n  </g>\\n  <g class=\\\"jp-icon3\\\" stroke=\\\"#616161\\\">\\n    <path class=\\\"jp-icon3\\\" d=\\\"m49,26 20,24m0-24-20,24\\\" fill=\\\"none\\\" stroke-linecap=\\\"round\\\"/>\\n  </g>\\n</svg>\\n\";","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg\\n   version=\\\"1.0\\\"\\n   width=\\\"500\\\"\\n   height=\\\"500\\\"\\n   viewBox=\\\"0 0 75 75\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\" stroke=\\\"#616161\\\">\\n    <path\\n       d=\\\"m 30,15.000037 -15.000001,-5e-5 0.317797,45.000025 H 30 Z\\\"\\n       style=\\\"stroke-width:5;stroke-linejoin:round\\\" />\\n    <path\\n       d=\\\"m 60,15.000037 -15.158899,-5e-5 0.317797,45.000025 H 60 Z\\\"\\n       style=\\\"stroke-width:5;stroke-linejoin:round\\\" />\\n  </g>\\n</svg>\\n\";","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg\\n   version=\\\"1.0\\\"\\n   width=\\\"500\\\"\\n   height=\\\"500\\\"\\n   viewBox=\\\"0 0 75 75\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\" stroke=\\\"#616161\\\">\\n    <path\\n       d=\\\"m 59.999999,37.5 -45,-22.500013 0.317797,45.000025 z\\\"\\n       style=\\\"stroke-width:5;stroke-linejoin:round\\\" />\\n  </g>\\n</svg>\\n\";","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.0\\\" width=\\\"500\\\" height=\\\"500\\\" viewBox=\\\"0 0 75 75\\\">\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\" stroke=\\\"#616161\\\">\\n    <path d=\\\"M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z\\\" style=\\\"stroke-width:5;stroke-linejoin:round;\\\"/>\\n  </g>\\n  <g class=\\\"jp-icon3\\\" stroke=\\\"#616161\\\">\\n    <path class=\\\"jp-icon3\\\" d=\\\"M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6\\\" style=\\\"fill:none;stroke-width:5;stroke-linecap:round\\\"/>\\n  </g>\\n</svg>\\n\";","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg\\n   version=\\\"1.0\\\"\\n   width=\\\"500\\\"\\n   height=\\\"500\\\"\\n   viewBox=\\\"0 0 75 75\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <g class=\\\"jp-icon3\\\" fill=\\\"#616161\\\" stroke=\\\"#616161\\\">\\n    <path\\n       d=\\\"m 59.999999,15.000037 -45,-5e-5 0.317797,45.000025 h 44.682203 z\\\"\\n       style=\\\"stroke-width:5;stroke-linejoin:round\\\" />\\n  </g>\\n</svg>\\n\";","import { JupyterFrontEnd } from '@jupyterlab/application';\nimport { ICommandPalette } from '@jupyterlab/apputils';\n\nimport { DawExtension } from './model';\nimport { CommandIDs } from './tokens';\n\nexport function addCommands(\n  app: JupyterFrontEnd,\n  palette: ICommandPalette | null,\n  dawModel: DawExtension\n): void {\n  /** Mute / Unmute main output (speakers). */\n  app.commands.addCommand(CommandIDs.dawToggleDestinationMute, {\n    label: 'Mute / Unmute Main Output',\n    execute: () => dawModel.toggleMuteDestination()\n  });\n\n  /** Start transport. */\n  app.commands.addCommand(CommandIDs.dawTransportStart, {\n    label: 'Start Transport',\n    execute: () => dawModel.transportStart()\n  });\n\n  /** Pause transport. */\n  app.commands.addCommand(CommandIDs.dawTransportPause, {\n    label: 'Pause Transport',\n    execute: () => dawModel.transportPause()\n  });\n\n  /** Stop transport. */\n  app.commands.addCommand(CommandIDs.dawTransportStop, {\n    label: 'Stop Transport',\n    execute: () => dawModel.transportStop()\n  });\n\n  if (palette !== null) {\n    palette.addItem({\n      command: CommandIDs.dawToggleDestinationMute,\n      category: 'DAW'\n    });\n\n    palette.addItem({\n      command: CommandIDs.dawTransportStart,\n      category: 'DAW'\n    });\n\n    palette.addItem({\n      command: CommandIDs.dawTransportPause,\n      category: 'DAW'\n    });\n\n    palette.addItem({\n      command: CommandIDs.dawTransportStop,\n      category: 'DAW'\n    });\n  }\n}\n","import React, { useCallback, useEffect, useRef } from 'react';\n\nimport { Meter as ToneMeter, ToneAudioNode } from 'tone';\n\nimport { useAnimationFrame } from '../util/animation';\n\nexport type MeterOrientation = 'horizontal' | 'vertical';\n\nexport type MeterProps = {\n  inputNode: ToneAudioNode;\n  width: number;\n  height: number;\n  color1?: string;\n  color2?: string;\n  orientation?: MeterOrientation;\n  fps?: number;\n  thresholdValue?: number;\n  enabled?: boolean;\n};\n\n/**\n * Audio meter visualizer.\n */\nexport const Meter: React.FC<MeterProps> = ({\n  inputNode,\n  width,\n  height,\n  color1 = 'lime',\n  color2 = 'red',\n  orientation = 'vertical',\n  fps = 30,\n  thresholdValue = 0.01,\n  enabled = true\n}): JSX.Element => {\n  const meterRef = useRef<ToneMeter>(\n    new ToneMeter({ normalRange: true, channels: 2 })\n  );\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const gradientRef = useRef<CanvasGradient | string>('lime');\n  const extentRef = useRef<number>(width);\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      const ctx = canvasRef.current.getContext('2d');\n      if (ctx) {\n        let grd: CanvasGradient;\n        if (orientation === 'horizontal') {\n          grd = ctx.createLinearGradient(0, 0, width, 0);\n        } else {\n          grd = ctx.createLinearGradient(0, height, 0, 0);\n        }\n\n        grd.addColorStop(0, color1);\n        grd.addColorStop(0.5, color1);\n        grd.addColorStop(1, color2);\n\n        gradientRef.current = grd;\n      }\n    }\n\n    if (orientation === 'horizontal') {\n      extentRef.current = width;\n    } else {\n      extentRef.current = height;\n    }\n  }, [width, height, color1, color2, orientation]);\n\n  useEffect(() => {\n    const meter = meterRef.current;\n\n    // TODO: use smoothing with next Tone.js release version\n    // https://github.com/Tonejs/Tone.js/issues/882\n    meter.smoothing = 0;\n    // display 2 channels even when a mono signal goes through destination\n    meter.channelCountMode = 'explicit';\n\n    return () => {\n      meter.dispose();\n    };\n  }, []);\n\n  useEffect(() => {\n    const meter = meterRef.current;\n    if (enabled) {\n      inputNode.connect(meter);\n    }\n\n    return () => {\n      if (enabled) {\n        inputNode.disconnect(meter);\n      }\n    };\n  }, [inputNode, enabled, fps]);\n\n  const render = useCallback(\n    (ctx: CanvasRenderingContext2D) => {\n      ctx.clearRect(0, 0, width, height);\n\n      const valueLR = meterRef.current.getValue() as number[];\n\n      const thresh = thresholdValue;\n      if (valueLR[0] < thresh && valueLR[1] < thresh) {\n        return;\n      }\n\n      const extent = extentRef.current;\n      const levelL = Math.round(Math.pow(valueLR[0], 0.2) * extent);\n      const levelR = Math.round(Math.pow(valueLR[1], 0.2) * extent);\n\n      ctx.fillStyle = gradientRef.current;\n\n      if (orientation === 'horizontal') {\n        ctx.fillRect(0, 0, levelL, height / 2);\n        ctx.fillRect(0, height / 2, levelR, height);\n      } else {\n        ctx.fillRect(0, height, width / 2, -levelL);\n        ctx.fillRect(width / 2, height, width, -levelR);\n      }\n    },\n    [width, height, orientation, thresholdValue]\n  );\n\n  useAnimationFrame(\n    () => {\n      if (canvasRef.current) {\n        const context = canvasRef.current.getContext('2d');\n        if (context) {\n          render(context);\n        }\n      }\n    },\n    fps,\n    enabled\n  );\n\n  return (\n    <div>\n      <canvas ref={canvasRef} height={height} width={width} />\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\n\nimport { getTransport } from 'tone';\n\nimport { useTransportDraw } from '../util/draw';\n\nexport type TransportPositionProps = {\n  state?: 'started' | 'stopped' | 'paused';\n  dirtyClassName?: string;\n};\n\nfunction getTransportPosition(): string {\n  const pos = getTransport().position.toString();\n  return pos.substr(0, pos.lastIndexOf(':')) + ':0';\n}\n\nexport const TransportPosition: React.FC<TransportPositionProps> = ({\n  state = 'stopped',\n  dirtyClassName = ''\n}): JSX.Element => {\n  const [position, setPosition] = useState<string>(getTransportPosition());\n  const [dirty, setDirty] = useState<boolean>(false);\n\n  // make sure to reset the input value when transport is stopped\n  // reset dirty when transport is started or stopped\n  useEffect(() => {\n    if (state === 'stopped') {\n      setPosition(getTransportPosition());\n      setDirty(false);\n    } else if (state === 'started') {\n      setDirty(false);\n    }\n  }, [state]);\n\n  const setPositionClb = useCallback(() => {\n    setPosition(getTransportPosition());\n  }, []);\n\n  useTransportDraw(setPositionClb, '4n');\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    setPosition(value);\n    setDirty(true);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      getTransport().position = position;\n      // update input value with reformatted position\n      setPosition(getTransportPosition());\n      setDirty(false);\n    }\n  };\n\n  return (\n    <input\n      type=\"text\"\n      className={dirty ? dirtyClassName : ''}\n      disabled={state === 'started'}\n      value={position}\n      onChange={handleChange}\n      onKeyDown={handleKeyDown}\n    />\n  );\n};\n","import { LabIcon } from '@jupyterlab/ui-components';\n\nimport speakerSvgstr from '../style/icons/speaker.svg';\nimport muteSvgstr from '../style/icons/mute.svg';\nimport playSvgstr from '../style/icons/play.svg';\nimport pauseSvgstr from '../style/icons/pause.svg';\nimport stopSvgstr from '../style/icons/stop.svg';\n\nexport const speakerIcon = new LabIcon({\n  name: 'daw:speaker',\n  svgstr: speakerSvgstr\n});\n\nexport const muteIcon = new LabIcon({\n  name: 'daw:mute',\n  svgstr: muteSvgstr\n});\n\nexport const playIcon = new LabIcon({\n  name: 'daw:play',\n  svgstr: playSvgstr\n});\n\nexport const pauseIcon = new LabIcon({\n  name: 'daw:pause',\n  svgstr: pauseSvgstr\n});\n\nexport const stopIcon = new LabIcon({\n  name: 'daw:stop',\n  svgstr: stopSvgstr\n});\n","import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { ICommandPalette } from '@jupyterlab/apputils';\n\nimport { TopBar } from './widgets';\n\nimport { addCommands } from './commands';\nimport { DawExtension } from './model';\nimport { IDawExtension } from './tokens';\n\nexport { IDawExtension } from './tokens';\n\n/**\n * Initialization data for the jupyterlab-daw extension.\n */\nconst plugin: JupyterFrontEndPlugin<IDawExtension> = {\n  id: 'jupyterlab-daw:plugin',\n  autoStart: true,\n  optional: [ICommandPalette],\n  provides: IDawExtension,\n  activate: (\n    app: JupyterFrontEnd,\n    palette: ICommandPalette | null\n  ): IDawExtension => {\n    const dawExtension = new DawExtension();\n\n    addCommands(app, palette, dawExtension);\n\n    const topBar = new TopBar(dawExtension, app.commands);\n    topBar.id = 'jp-daw-topbar';\n    app.shell.add(topBar, 'top', { rank: 1000 });\n\n    return dawExtension;\n  }\n};\n\nexport default plugin;\n","import { ISignal, Signal } from '@lumino/signaling';\n\nimport { getDestination, getTransport, start } from 'tone';\n\nimport { IDawExtension } from './tokens';\n\nexport class DawExtension implements IDawExtension {\n  constructor() {\n    const transport = getTransport();\n\n    this._transportClb = () => { this._transportChanged.emit(); };\n    transport.on('start', this._transportClb);\n    transport.on('pause', this._transportClb);\n    transport.on('stop', this._transportClb);\n  }\n\n  /**\n   * Signal emitted when the state of the destination node (speakers)\n   * is changed.\n   */\n  get destinationChanged(): ISignal<IDawExtension, void> {\n    return this._destinationChanged;\n  }\n\n  /**\n   * Proxy for the destination node (speakers) mute.\n   */\n  get destinationMute(): boolean {\n    return getDestination().mute;\n  }\n\n  /**\n   * Mute or unmute the destination node (speakers).\n   */\n  toggleMuteDestination(): void {\n    const dest = getDestination();\n    dest.mute = !dest.mute;\n    this._destinationChanged.emit();\n  }\n\n  /**\n   * A signal emitted whenever the state of Tonejs Transport\n   * changes.\n   */\n  get transportChanged(): ISignal<IDawExtension, void> {\n    return this._transportChanged;\n  }\n\n  /**\n   * Current Tonejs transport state\n   */\n  get transportState(): 'started' | 'stopped' | 'paused' {\n    return getTransport().state;\n  }\n\n  /**\n   * Start Tone transport\n   */\n  transportStart(): void {\n    const transport = getTransport();\n    if (transport.state !== 'started') {\n      // start transport inactive if context not started\n      start();\n\n      transport.start();\n      this._transportChanged.emit();\n    }\n  }\n\n  /**\n   * Pause Tone transport\n   */\n  transportPause(): void {\n    const transport = getTransport();\n    if (transport.state === 'started') {\n      transport.pause();\n      this._transportChanged.emit();\n    }\n  }\n\n  /**\n   * Stop Tone transport\n   */\n  transportStop(): void {\n    const transport = getTransport();\n    if (transport.state !== 'stopped') {\n      transport.stop();\n      this._transportChanged.emit();\n    }\n  }\n\n  /**\n   * Boolean indicating whether the model has been disposed.\n   */\n  get isDisposed(): boolean {\n    return this._isDisposed;\n  }\n\n  /**\n   * Dispose model ressources and unbind tone signal callbacks.\n   */\n  dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n\n    Signal.clearData(this);\n\n    const transport = getTransport();\n    transport.off('start', this._transportClb);\n    transport.off('pause', this._transportClb);\n    transport.off('stop', this._transportClb);\n\n    this._isDisposed = true;\n  }\n\n  private _transportClb: {(): void};\n  private _isDisposed = false;\n  private _destinationChanged = new Signal<IDawExtension, void>(this);\n  private _transportChanged = new Signal<IDawExtension, void>(this);\n}\n","import { Token } from '@lumino/coreutils';\nimport { IDisposable } from '@lumino/disposable';\nimport { ISignal } from '@lumino/signaling';\n\nexport const EXTENSION_ID = 'jupyter.extensions.daw_plugin';\n\nexport const IDawExtension = new Token<IDawExtension>(EXTENSION_ID);\n\nexport interface IDawExtension extends IDisposable {\n  /**\n   * A signal emitted whenever the state of the audio destination\n   * (speaker) node changes (e.g., mute, volume).\n   */\n  readonly destinationChanged: ISignal<IDawExtension, void>;\n\n  /**\n   * Proxy for the destination node (speakers) mute.\n   */\n  readonly destinationMute: boolean;\n\n  /**\n   * Mute / Unmute the audio destination.\n   *\n   * This is a wrapper around Tone.getDestination.mute that allows\n   * emitting a signal.\n   */\n  toggleMuteDestination(): void;\n\n  /**\n   * A signal emitted whenever the state of Tonejs Transport\n   * changes.\n   */\n  readonly transportChanged: ISignal<IDawExtension, void>;\n\n  /**\n   * Current Tonejs transport state\n   */\n  readonly transportState: 'started' | 'stopped' | 'paused';\n\n  /**\n   * Start Tone transport\n   */\n  transportStart(): void;\n\n  /**\n   * Pause Tone transport\n   */\n  transportPause(): void;\n\n  /**\n   * Stop Tone transport\n   */\n  transportStop(): void;\n}\n\n/**\n * The command IDs used by the daw plugin.\n */\nexport enum CommandIDs {\n  dawToggleDestinationMute = 'daw:toggle-main-mute',\n  dawTransportStart = 'daw:transport-start',\n  dawTransportPause = 'daw:transport-pause',\n  dawTransportStop = 'daw:transport-stop'\n}\n","import { useCallback, useEffect, useRef } from 'react';\n\n/**\n * Reusable React Hook for setting animation frames.\n *\n * @param callback - function called at each frame (fps) render\n * @param fps {number} - allow executing the callback less often than the screen refresh rate\n * @param running {boolean=} - changing the state will either start or stop the animation\n *\n */\nexport const useAnimationFrame = (\n  callback: { (): void },\n  fps: number,\n  running = true\n): void => {\n  const frameRef = useRef<number>(0);\n  const prevRef = useRef<number>(-1);\n\n  const animate = useCallback(() => {\n    const now = performance.now();\n    const delta = now - prevRef.current;\n    if (prevRef.current === -1 || delta >= 1000 / fps) {\n      callback();\n      prevRef.current = now;\n    }\n    frameRef.current = requestAnimationFrame(animate);\n  }, [callback, fps]);\n\n  useEffect(() => {\n    if (running) {\n      frameRef.current = requestAnimationFrame(animate);\n    }\n\n    return () => {\n      // delay stopping the animation (draw next 10 actual frames) so that\n      // it has a chance to clear or reset properly.\n      if (running) {\n        setTimeout(() => {\n          cancelAnimationFrame(frameRef.current);\n        }, 10000 / fps);\n      }\n    };\n  }, [running, fps, animate]);\n};\n","import { useEffect, useRef } from 'react';\n\nimport { getDraw, getTransport, TimeClass } from 'tone';\n\n/**\n * React hook for Tone transport synced animations.\n */\nexport const useTransportDraw = (\n  callback: { (): void },\n  interval: string | number | TimeClass\n): void => {\n  const eventIDRef = useRef<number>(-1);\n\n  useEffect(() => {\n    const transport = getTransport();\n\n    const drawCallback = (time: any) => {\n      getDraw().schedule(callback, time);\n    };\n\n    eventIDRef.current = transport.scheduleRepeat(drawCallback, interval);\n\n    return () => {\n      transport.clear(eventIDRef.current);\n    };\n  }, [interval, callback]);\n};\n","import {\n  ReactWidget,\n  Toolbar,\n  ToolbarButtonComponent,\n  UseSignal\n} from '@jupyterlab/apputils';\n\nimport { CommandRegistry } from '@lumino/commands';\nimport { Widget } from '@lumino/widgets';\n\nimport React from 'react';\n\nimport { getDestination } from 'tone';\n\nimport { Meter } from '../components/meter';\nimport { TransportPosition } from '../components/transport';\nimport {\n  speakerIcon,\n  muteIcon,\n  playIcon,\n  stopIcon,\n  pauseIcon\n} from '../iconimports';\nimport { CommandIDs, IDawExtension } from '../tokens';\n\nconst TOPBAR_CLASS = 'jp-daw-TopBar';\nconst CONTENT_CLASS = 'jp-daw-TopBar-item';\n\nexport class TopBar extends Toolbar<Widget> {\n  constructor(model: IDawExtension, commands: CommandRegistry) {\n    super();\n    this._model = model;\n    this.addClass(TOPBAR_CLASS);\n\n    const playButton = ReactWidget.create(\n      <UseSignal signal={model.transportChanged}>\n        {() => (\n          <ToolbarButtonComponent\n            icon={playIcon}\n            pressedIcon={pauseIcon}\n            pressed={model.transportState === 'started'}\n            tooltip={'start transport'}\n            pressedTooltip={'pause transport'}\n            onClick={() => {\n              if (model.transportState === 'started') {\n                commands.execute(CommandIDs.dawTransportPause);\n              } else {\n                commands.execute(CommandIDs.dawTransportStart);\n              }\n            }}\n          />\n        )}\n      </UseSignal>\n    );\n\n    this.addItem('jp-daw-topbar-play', playButton);\n\n    const stopButton = ReactWidget.create(\n      <UseSignal signal={model.transportChanged}>\n        {() => (\n          <ToolbarButtonComponent\n            icon={stopIcon}\n            tooltip={'stop transport'}\n            onClick={() => {\n              commands.execute(CommandIDs.dawTransportStop);\n            }}\n          />\n        )}\n      </UseSignal>\n    );\n\n    this.addItem('jp-daw-topbar-stop', stopButton);\n\n    const transportPosition = ReactWidget.create(\n      <UseSignal signal={model.transportChanged}>\n        {() => (\n          <TransportPosition\n            state={model.transportState}\n            dirtyClassName={'jp-daw-mod-dirty'}\n          />\n        )}\n      </UseSignal>\n    );\n\n    transportPosition.addClass('jp-daw-TransportPosition');\n    this.addItem('jp-daw-topbar-transport-position', transportPosition);\n\n    const meter = ReactWidget.create(\n      <UseSignal signal={model.destinationChanged}>\n        {() => (\n          <Meter\n            inputNode={getDestination()}\n            width={16}\n            height={21}\n            fps={20}\n            orientation={'vertical'}\n            enabled={!this._model.destinationMute}\n          />\n        )}\n      </UseSignal>\n    );\n\n    meter.addClass('jp-daw-Meter');\n    this.addItem('jp-daw-topbar-meter', meter);\n\n    const toggleMuteButton = ReactWidget.create(\n      <UseSignal signal={model.destinationChanged}>\n        {() => (\n          <ToolbarButtonComponent\n            icon={speakerIcon}\n            pressedIcon={muteIcon}\n            pressed={this._model.destinationMute}\n            tooltip={'mute'}\n            pressedTooltip={'unmute'}\n            onClick={() => {\n              commands.execute(CommandIDs.dawToggleDestinationMute);\n            }}\n          />\n        )}\n      </UseSignal>\n    );\n\n    this.addItem('jp-daw-topbar-toggle-mute', toggleMuteButton);\n  }\n\n  addItem(name: string, item: Widget): boolean {\n    item.addClass(CONTENT_CLASS);\n    return super.addItem(name, item);\n  }\n\n  private _model: IDawExtension;\n}\n"],"names":[],"sourceRoot":""}