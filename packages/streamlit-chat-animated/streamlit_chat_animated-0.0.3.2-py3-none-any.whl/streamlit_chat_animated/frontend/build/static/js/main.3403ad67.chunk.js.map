{"version":3,"sources":["AnimatedText.tsx","chatContainer.tsx","stChat.tsx","index.tsx"],"names":["AnimatedText","text","onComplete","onHeightChange","args","useState","visibleText","setVisibleText","textRef","useRef","completed","setCompleted","useEffect","index","interval","setInterval","length","prevText","current","height","getBoundingClientRect","clearInterval","style","background","theme","secondaryBackgroundColor","border","borderRadius","padding","margin","maxWidth","fontSize","overflow","flex","whiteSpace","flexDirection","display","ref","ChatContainer","isUser","message","animated","isAnimationCompleted","setAnimationCompleted","containerHeightRef","avatarUrl","TypingStyle","styled","Avatar","img","width","props","css","Message","div","Chat","src","alt","draggable","Streamlit","setComponentValue","console","log","setFrameHeight","render","window","innerHeight","key","StyledChatContainer","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3403ad67.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\ninterface AnimatedTextProps {\n    text: string;\n    onComplete: () => void;\n    onHeightChange: (height: number) => void;\n    args: any;\n}\n\nconst AnimatedText: React.FC<AnimatedTextProps> = ({ text, onComplete, onHeightChange, args }) => {\n  const [visibleText, setVisibleText] = useState('');\n  const textRef = useRef<HTMLDivElement>(null);\n  const [completed, setCompleted] = useState(false);\n\n  useEffect(() => {\n    if (completed) return;\n\n    let index = 0;\n\n    const interval = setInterval(() => {\n      if (index < text.length) {\n        setVisibleText((prevText) => prevText + text[index]);\n\n        if (textRef.current) {\n          const { height } = textRef.current.getBoundingClientRect();\n          onHeightChange(height);\n        }\n\n        index++;\n      } else {\n        clearInterval(interval);\n        onComplete();\n        setCompleted(true);\n      }\n    }, 10); // Adjust the typing speed here\n\n    return () => clearInterval(interval);\n  }, [text, onComplete, onHeightChange, completed]);\n\n  return (\n    <div\n      style={{\n        background: args.theme.secondaryBackgroundColor,\n        border: '1px solid transparent',\n        borderRadius: '10px',\n        padding: '10px 14px',\n        margin: '5px 20px',\n        maxWidth: '70%',\n        fontSize: '1rem',\n        overflow: 'scroll',\n        flex: 1,\n        whiteSpace: 'pre-line',\n        flexDirection: 'column',\n        display: 'flex',\n      }}\n      ref={textRef}\n    >\n      {visibleText}\n    </div>\n  );\n};\n\nexport default AnimatedText;\n","import React, { useRef, useState, useEffect } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"@emotion/react\";\nimport Typed, { ReactTypedProps } from 'react-typed';\nimport 'react-typed/dist/animatedCursor.css';\nimport AnimatedText from './AnimatedText'; // Assuming both files are in the same folder\nimport { Streamlit } from \"streamlit-component-lib\";\n\n\n// import Typing, { TypingProps } from 'react-typing-animation';\n\ninterface ChatProps {\n  args: {\n    isUser: boolean;\n    message: string;\n    animated: boolean;\n    theme: any;\n  \n  };\n}\n\ninterface AvatarProps {\n  isUser: boolean;\n}\n\ninterface ChatContainerProps {\n  isUser: boolean;\n}\n\ninterface ExtendedTypingProps extends ReactTypedProps {\n\n}\n\nconst ChatContainer: React.FC<ChatProps> = ({ args }) => {\n  const { isUser, message, animated } = args;\n  const [isAnimationCompleted, setAnimationCompleted] = useState(false);\n  const containerHeightRef = useRef(0);\n\n  let avatarUrl = \"\";\n  if (!isUser) {\n    avatarUrl = `https://api.dicebear.com/6.x/avataaars/svg?seed=Felix&facialHair=beardMajestic&facialHairColor=2c1b18&eyes=happy&hairColor=4a312c&skinColor=d08b5b&style=circle&clothing=shirtVNeck&clothesColor=ffffff&top=curvy`;\n  } else {\n    avatarUrl = `https://api.dicebear.com/6.x/shapes/svg?backgroundType=gradientLinear,solid`;\n  }\n\n  // Styles for the Typing component\n  const TypingStyle = styled(AnimatedText)({\n    background: args.theme.secondaryBackgroundColor,\n   \n    // etc.\n  });\n\n  // styles for the avatar image\n  const Avatar = styled.img<AvatarProps>(\n    {\n      border: `1px solid transparent`,\n      borderRadius: \"50%\",\n      height: \"5rem\",\n      width: \"5rem\",\n      margin: 0,\n    },\n    (props: { isUser: boolean }) => {\n      // specific styles\n      if (props.isUser) {\n        return css`\n          height: 4rem;\n          width: 4rem;\n          margin: 0;\n        `;\n      }\n      return css``;\n    }\n  );\n\n  // styles for the message box\n  const Message = styled.div({\n    display: \"inline-block\",\n    background: args.theme.secondaryBackgroundColor,\n    border: \"1px solid transparent\",\n    borderRadius: \"10px\",\n    padding: \"10px 14px\",\n    margin: \"5px 20px\",\n    height: \"auto\",\n    maxWidth: \"70%\",\n    whiteSpace: \"pre-line\",\n  });\n\n  // styles for the container\n  const Chat = styled.div<ChatContainerProps>(\n    {\n      display: \"flex\",\n      flex: 1,\n      maxWidth: \"100vw\",\n      height: \"auto\",\n      overflow: \"auto\",\n    },\n    (props: { isUser: boolean }) => {\n      // specific styles\n      if (props.isUser) {\n        return css`\n        flex-direction: row-reverse;\n        & > div {/\n          text-align: right;\n        }\n      `;\n      }\n      return css``;\n    }\n  );\n\n  const handleAnimationComplete = () => {\n    setAnimationCompleted(true);\n    args.animated=true\n    Streamlit.setComponentValue(args); // Send the value back to Streamlit\n  };\n\n  const updateHeight = (height: number) => {\n    containerHeightRef.current = height;\n    console.log(containerHeightRef.current)\n    Streamlit.setFrameHeight(height);\n\n  };\n\n\n\n  return (\n    <div style={{ height: `${containerHeightRef.current}px` }}>\n      <Chat isUser={isUser}>\n        <Avatar isUser={isUser} src={avatarUrl} alt=\"profile\" draggable=\"false\" />\n        {!isUser && !animated && !isAnimationCompleted? (\n          <div>\n            <TypingStyle\n              text={message}\n              onComplete={handleAnimationComplete}\n              onHeightChange={updateHeight} // Pass the handler here\n              args={args}\n            />\n          </div>\n        ) : (\n          <Message>{message}</Message>\n        )}\n      </Chat>\n    </div>\n  );\n}\n\nexport default ChatContainer","import {\n  // eslint-disable-next-line \n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode, useEffect, useState } from \"react\"\nimport styled from \"@emotion/styled\";\nimport ChatContainer from './chatContainer'\n\nclass Chat extends StreamlitComponentBase {\n\n  constructor(props:any) {\n    super(props);\n\n  }\n\n  public render = (): ReactNode => {\n    Streamlit.setFrameHeight(window.innerHeight)\n    const { isUser, message, animated, key } = this.props.args;\n    \n    // Streamlit sends us a theme object via props that we can use to ensure\n    // that our component has visuals that match the active theme in a\n    // streamlit app.\n    const { theme } = this.props\n    \n    // Maintain compatibility with older versions of Streamlit that don't send\n    // a theme object.\n    if (!theme) {\n      return <div>Theme is undefined, please check streamlit version.</div>\n    }\n    // Styles for the Typing component\n  const StyledChatContainer = styled(ChatContainer)({\n  });\n    return (\n        <StyledChatContainer args={{ isUser: isUser, message: message, theme: theme, animated: animated}}/>\n\n    )\n  }\n}\n\nexport default withStreamlitConnection(Chat);\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Chat from \"./stChat\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Chat />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}