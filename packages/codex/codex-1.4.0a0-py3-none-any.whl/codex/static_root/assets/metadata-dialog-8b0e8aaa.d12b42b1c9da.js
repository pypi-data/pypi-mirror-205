import{c as j,o as c,e as T,aB as Te,r as ne,w,aC as Ve,aD as X,au as xe,c0 as Ke,c1 as Ge,c2 as He,S as We,c3 as A,bL as h,c4 as ge,ae as ee,c5 as Ye,c6 as Xe,c7 as _e,N as ce,c8 as Qe,ad as Pe,c9 as Je,T as me,ca as Y,cb as Ze,g as l,be as ye,bf as et,cc as tt,bh as at,cd as lt,ce as st,cf as ke,cg as ot,bH as rt,bd as nt,ch as ut,bN as Se,F as ve,bO as it,ar as oe,J as dt,G as ct,ci as mt,a as Z,M as Q,d as P,cj as vt,ao as he,f as R,t as V,ck as ht,j as d,cl as ft,cm as pt,y as bt,k as O,E as re,D as Me,ay as gt,q as Be,v as Re,I as _t,cn as yt,_ as Ie,bB as kt,co as St,B as Ct,C as wt,b6 as Tt,bE as Vt,b4 as Pt,b5 as Mt,cp as Bt,a$ as de,b as Ce,K as Rt,a_ as It,b2 as Nt,l as Ft,aT as Lt,az as $t}from"./admin-73d93dc7.js";const Dt={name:"PaginationToolbar"};function At(e,t,a,i,n,s){return c(),T(xe,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Te({_:2},[ne(e.$slots,(u,o)=>({name:o,fn:w(m=>[Ve(e.$slots,o,X({props:u},m),void 0,!0)])}))]),1024)}const el=j(Dt,[["render",At],["__scopeId","data-v-cfa8cce0"]]);const fe=Symbol.for("vuetify:v-slider");function Et(e,t,a){const i=a==="vertical",n=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return i?s.clientY-(n.top+n.height/2):s.clientX-(n.left+n.width/2)}function zt(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ot=Ke({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...Ge(),...He({elevation:2})},"slider"),jt=e=>{let{props:t,handleSliderMouseUp:a,handleMouseMove:i,getActiveThumb:n}=e;const{isRtl:s}=We(),u=A(t,"reverse"),o=h(()=>{let r=s.value?"rtl":"ltr";return t.reverse&&(r=r==="rtl"?"ltr":"rtl"),r}),m=h(()=>parseFloat(t.min)),v=h(()=>parseFloat(t.max)),_=h(()=>+t.step>0?parseFloat(t.step):0),F=h(()=>Math.max(ge(_.value),ge(m.value))),k=h(()=>parseInt(t.thumbSize,10)),I=h(()=>parseInt(t.tickSize,10)),M=h(()=>parseInt(t.trackSize,10)),N=h(()=>(v.value-m.value)/_.value),G=A(t,"disabled"),H=h(()=>t.direction==="vertical"),E=h(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),f=h(()=>t.error||t.disabled?void 0:t.trackColor??t.color),q=h(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),L=ee(!1),g=ee(0),B=ee(),y=ee();function $(r){if(_.value<=0)return r;const p=_e(r,m.value,v.value),se=m.value%_.value,ue=Math.round((p-se)/_.value)*_.value+se;return parseFloat(Math.min(ue,v.value).toFixed(F.value))}function z(r){var be;const p=t.direction==="vertical",se=p?"top":"left",ue=p?"height":"width",Oe=p?"clientY":"clientX",{[se]:je,[ue]:qe}=(be=B.value)==null?void 0:be.$el.getBoundingClientRect(),Ue=zt(r,Oe);let ie=Math.min(Math.max((Ue-je-g.value)/qe,0),1)||0;return(p||o.value==="rtl")&&(ie=1-ie),$(m.value+ie*(v.value-m.value))}let D=!1;const S=r=>{D||(g.value=0,a(z(r))),L.value=!1,D=!1,g.value=0},J=r=>{y.value=n(r),y.value&&(y.value.focus(),L.value=!0,y.value.contains(r.target)?(D=!0,g.value=Et(r,y.value,t.direction)):(g.value=0,i(z(r))))},U={passive:!0,capture:!0};function x(r){D=!0,i(z(r))}function b(r){r.stopPropagation(),r.preventDefault(),S(r),window.removeEventListener("mousemove",x,U),window.removeEventListener("mouseup",b)}function C(r){var p;S(r),window.removeEventListener("touchmove",x,U),(p=r.target)==null||p.removeEventListener("touchend",C)}function K(r){var p;J(r),window.addEventListener("touchmove",x,U),(p=r.target)==null||p.addEventListener("touchend",C,{passive:!1})}function te(r){r.preventDefault(),J(r),window.addEventListener("mousemove",x,U),window.addEventListener("mouseup",b,{passive:!1})}const W=r=>{const p=(r-m.value)/(v.value-m.value)*100;return _e(isNaN(p)?0:p,0,100)},ae=A(t,"showTicks"),le=h(()=>ae.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(r=>({value:r,position:W(r),label:r.toString()})):Object.keys(t.ticks).map(r=>({value:parseFloat(r),position:W(parseFloat(r)),label:t.ticks[r]})):N.value!==1/0?Ye(N.value+1).map(r=>{const p=m.value+r*_.value;return{value:p,position:W(p)}}):[]:[]),ze=h(()=>le.value.some(r=>{let{label:p}=r;return!!p})),pe={activeThumbRef:y,color:A(t,"color"),decimals:F,disabled:G,direction:A(t,"direction"),elevation:A(t,"elevation"),hasLabels:ze,horizontalDirection:o,isReversed:u,min:m,max:v,mousePressed:L,numTicks:N,onSliderMousedown:te,onSliderTouchstart:K,parsedTicks:le,parseMouseMove:z,position:W,readonly:A(t,"readonly"),rounded:A(t,"rounded"),roundValue:$,showTicks:ae,startOffset:g,step:_,thumbSize:k,thumbColor:E,thumbLabel:A(t,"thumbLabel"),ticks:A(t,"ticks"),tickSize:I,trackColor:f,trackContainerRef:B,trackFillColor:q,trackSize:M,vertical:H};return Xe(fe,pe),pe},qt=ce()({name:"VSliderThumb",directives:{Ripple:Qe},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0}},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:i}=t;const n=Pe(fe);if(!n)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:u,vertical:o,disabled:m,thumbSize:v,thumbLabel:_,direction:F,readonly:k,elevation:I,isReversed:M,horizontalDirection:N,mousePressed:G,decimals:H}=n,{textColorClasses:E,textColorStyles:f}=Je(s),{pageup:q,pagedown:L,end:g,home:B,left:y,right:$,down:z,up:D}=lt,S=[q,L,g,B,y,$,z,D],J=h(()=>u.value?[1,2,3]:[1,5,10]);function U(b,C){if(!S.includes(b.key))return;b.preventDefault();const K=u.value||.1,te=(e.max-e.min)/K;if([y,$,z,D].includes(b.key)){const ae=(N.value==="rtl"?[y,D]:[$,D]).includes(b.key)?1:-1,le=b.shiftKey?2:b.ctrlKey?1:0;C=C+ae*K*J.value[le]}else if(b.key===B)C=e.min;else if(b.key===g)C=e.max;else{const W=b.key===L?1:-1;C=C-W*K*(te>100?te/10:10)}return Math.max(e.min,Math.min(e.max,C))}function x(b){const C=U(b,e.modelValue);C!=null&&i("update:modelValue",C)}return me(()=>{const b=Y(o.value||M.value?100-e.position:e.position,"%"),{elevationClasses:C}=Ze(h(()=>m.value?void 0:I.value));return l("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&G.value}],style:{"--v-slider-thumb-position":b,"--v-slider-thumb-size":Y(v.value)},role:"slider",tabindex:m.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":k.value,"aria-orientation":F.value,onKeydown:k.value?void 0:x},[l("div",{class:["v-slider-thumb__surface",E.value,C.value],style:{...f.value}},null),ye(l("div",{class:["v-slider-thumb__ripple",E.value],style:f.value},null),[[et("ripple"),e.ripple,null,{circle:!0,center:!0}]]),l(tt,{origin:"bottom center"},{default:()=>{var K;return[ye(l("div",{class:"v-slider-thumb__label-container"},[l("div",{class:["v-slider-thumb__label"]},[l("div",null,[((K=a["thumb-label"])==null?void 0:K.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(u.value?H.value:1)])])]),[[at,_.value&&e.focused||_.value==="always"]])]}})])}),{}}});const Ut=ce()({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(e,t){let{slots:a}=t;const i=Pe(fe);if(!i)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:n,horizontalDirection:s,parsedTicks:u,rounded:o,showTicks:m,tickSize:v,trackColor:_,trackFillColor:F,trackSize:k,vertical:I,min:M,max:N}=i,{roundedClasses:G}=st(o),{backgroundColorClasses:H,backgroundColorStyles:E}=ke(F),{backgroundColorClasses:f,backgroundColorStyles:q}=ke(_),L=h(()=>`inset-${I.value?"block-end":"inline-start"}`),g=h(()=>I.value?"height":"width"),B=h(()=>({[L.value]:"0%",[g.value]:"100%"})),y=h(()=>e.stop-e.start),$=h(()=>({[L.value]:Y(e.start,"%"),[g.value]:Y(y.value,"%")})),z=h(()=>m.value?(I.value?u.value.slice().reverse():u.value).map((S,J)=>{var b;const U=I.value?"bottom":"margin-inline-start",x=S.value!==M.value&&S.value!==N.value?Y(S.position,"%"):void 0;return l("div",{key:S.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":S.position>=e.start&&S.position<=e.stop,"v-slider-track__tick--first":S.value===M.value,"v-slider-track__tick--last":S.value===N.value}],style:{[U]:x}},[(S.label||a["tick-label"])&&l("div",{class:"v-slider-track__tick-label"},[((b=a["tick-label"])==null?void 0:b.call(a,{tick:S,index:J}))??S.label])])}):[]);return me(()=>l("div",{class:["v-slider-track",G.value],style:{"--v-slider-track-size":Y(k.value),"--v-slider-tick-size":Y(v.value),direction:I.value?void 0:s.value}},[l("div",{class:["v-slider-track__background",f.value,{"v-slider-track__background--opacity":!!n.value||!F.value}],style:{...B.value,...q.value}},null),l("div",{class:["v-slider-track__fill",H.value],style:{...$.value,...E.value}},null),m.value&&l("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":m.value==="always"}]},[z.value])])),{}}}),xt=ce()({name:"VSlider",props:{...ot(),...Ot(),...rt(),modelValue:{type:[Number,String],default:0}},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const i=ee(),{min:n,max:s,mousePressed:u,roundValue:o,onSliderMousedown:m,onSliderTouchstart:v,trackContainerRef:_,position:F,hasLabels:k,readonly:I}=jt({props:e,handleSliderMouseUp:f=>M.value=o(f),handleMouseMove:f=>M.value=o(f),getActiveThumb:()=>{var f;return(f=i.value)==null?void 0:f.$el}}),M=nt(e,"modelValue",void 0,f=>{const q=typeof f=="string"?parseFloat(f):f??n.value;return o(q)}),{isFocused:N,focus:G,blur:H}=ut(e),E=h(()=>F(M.value));return me(()=>{const[f,q]=Se.filterProps(e),L=!!(e.label||a.label||a.prepend);return l(Se,X({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||k.value,"v-slider--focused":N.value,"v-slider--pressed":u.value,"v-slider--disabled":e.disabled}]},f,{focused:N.value}),{...a,prepend:L?g=>{var B,y;return l(ve,null,[((B=a.label)==null?void 0:B.call(a,g))??e.label?l(it,{id:g.id.value,class:"v-slider__label",text:e.label},null):void 0,(y=a.prepend)==null?void 0:y.call(a,g)])}:void 0,default:g=>{let{id:B,messagesId:y}=g;return l("div",{class:"v-slider__container",onMousedown:I.value?void 0:m,onTouchstartPassive:I.value?void 0:v},[l("input",{id:B.value,name:e.name||B.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:M.value},null),l(Ut,{ref:_,start:0,stop:E.value},{"tick-label":a["tick-label"]}),l(qt,{ref:i,"aria-describedby":y.value,focused:N.value,min:n.value,max:s.value,modelValue:M.value,"onUpdate:modelValue":$=>M.value=$,position:E.value,elevation:e.elevation,onFocus:G,onBlur:H},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Kt={name:"PaginationSlider"};function Gt(e,t,a,i,n,s){return c(),T(xt,X({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),null,16)}const tl=j(Kt,[["render",Gt],["__scopeId","data-v-825b160e"]]);const Ht={name:"PaginationNavButton"};function Wt(e,t,a,i,n,s){return c(),T(oe,X({class:"paginationNavButton",height:"100%"},e.$attrs),Te({_:2},[ne(e.$slots,(u,o)=>({name:o,fn:w(m=>[Ve(e.$slots,o,X({props:u},m),void 0,!0)])}))]),1040)}const al=j(Ht,[["render",Wt],["__scopeId","data-v-852fad11"]]),Ne=dt.browser.vuetifyNullCode,Fe="None",Yt={value:Ne,title:Fe},Xt=function(e,t){let a;return e===void 0?a=e:e instanceof Object?(a={value:e.pk,title:e.name},e.pk===null||e.name===void 0?a.value=Ne:t||(a.value=+e.pk),(a.title===null||a.value===void 0)&&(a.title=Fe)):e===null?a=Yt:a={value:e,title:e.toString()},a},Qt=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},Jt=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},Zt=function(e,t,a=!1,i=!1){const n=e||[],s=t&&t.toLowerCase();let u=[];for(const m of n){const v=Xt(m,i);v&&(!s||v.title&&v.title.toLowerCase().includes(s))&&u.push(v)}const o=a?Jt:Qt;return u.sort(o)};const ea={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function ta(e,t,a,i,n,s){return c(),T(ct,X({"aria-label":"loading",class:"codexProgressCircular",indeterminate:a.indeterminate},e.$attrs),null,16,["indeterminate"])}const Le=j(ea,[["render",ta],["__scopeId","data-v-7bb4cf22"]]),aa=(e,t)=>e?`${mt(e)}/cover.webp?${t}`:window.CODEX.MISSING_COVER;const la={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,required:!0}},data(){return{showPlaceholder:!1}},computed:{...Z(Q,{coverSrc:function(e){return aa(this.coverPk,e.page.coversTimestamp)}})},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},sa={class:"bookCover"},oa={key:1,class:"childCount"};function ra(e,t,a,i,n,s){return c(),P("div",sa,[l(vt,{src:e.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(c(),P("div",{key:0,class:he({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):R("",!0),a.group!=="c"?(c(),P("span",oa,V(a.childCount),1)):R("",!0)])}const $e=j(la,[["render",ra],["__scopeId","data-v-9acb5f6a"]]);const na={name:"MetadataTags",props:{label:{type:String,required:!0},items:{type:Array,default(){return[]}},values:{type:Array,default(){return[]}}},data(){return{mdiFilter:ht}},computed:{...Z(Q,{filterValues:function(e){return e.settings.filters[this.label.toLowerCase()]}}),model(){return Zt(this.values)}},methods:{chipColor:function(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""}}},ua={key:0,class:"tags"},ia={class:"label"};function da(e,t,a,i,n,s){return s.model&&s.model.length>0?(c(),P("div",ua,[l(pt,{value:s.model,multiple:"",class:"chipGroup"},{default:w(()=>[d("div",ia,V(a.label),1),(c(!0),P(ve,null,ne(s.model,u=>(c(),T(ft,{key:`${a.label}/${u.value}`,color:s.chipColor(u.value),value:u.value,text:u.title},null,8,["color","value","text"]))),128))]),_:1},8,["value"])])):R("",!0)}const De=j(na,[["render",da],["__scopeId","data-v-80903885"]]);const ca={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:Boolean,default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:bt}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){const e=Q();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;let t;if(t=this.obj&&this.obj.group==this.group?this.obj.pk:this.value.pk,!t)return;const a=this.$router.currentRoute.value.params;if(!(a.group===this.group&&+a.pk===t))return{name:"browser",params:{group:this.group,pk:t}}}}},ma={class:"textLabel"},va={class:"textValue"},ha=["href"],fa={key:3,class:"textContent"},pa={key:4,id:"basePath"};function ba(e,t,a,i,n,s){const u=Me("router-link");return s.computedValue?(c(),P("div",{key:0,class:he(["text",{highlight:s.highlight}])},[d("div",ma,V(a.label),1),d("div",va,[s.groupTo&&a.group==="f"?(c(),T(u,{key:0,id:"folderPath",to:s.groupTo,title:"Browse Folder"},{default:w(()=>[O(V(s.folderPath)+"/",1)]),_:1},8,["to"])):s.groupTo?(c(),T(u,{key:1,class:"textContent",to:s.groupTo,title:`Browse ${a.label}`},{default:w(()=>[O(V(s.computedValue),1)]),_:1},8,["to","title"])):a.link?(c(),P("a",{key:2,href:s.computedValue,target:"_blank"},[O(V(s.computedValue)+" ",1),l(re,{size:"small"},{default:w(()=>[O(V(n.mdiOpenInNew),1)]),_:1})],8,ha)):(c(),P("div",fa,V(s.computedValue),1)),s.groupTo&&a.group==="f"?(c(),P("span",pa,V(s.basePath),1)):R("",!0)])],2)):R("",!0)}const Ae=j(ca,[["render",ba],["__scopeId","data-v-7a19eb52"]]);const ga={name:"MetadatacreatorsTable",props:{value:{type:Array,default:void 0}},data(){return{}},computed:{sortedcreators:function(){return this.value?[...this.value].sort(this.creatorsCompare):[]},...Z(Q,{filteredCreators(e){return e.settings.filters.creators}})},methods:{roleName:function(e){return e==="CoverArtist"?"Cover Artist":e},creatorSortable:function(e){const t=e.person.name.split(" ");let a=[];return t&&(a.push(t.slice(-1)),t.length>1&&a.push(t.slice(0,-1))),a.push(e.role.name),a.join(" ")},creatorsCompare:function(e,t){const a=this.creatorSortable(e),i=this.creatorSortable(t);return a<i?-1:a>i?1:0},isFilteredCreator(e){return this.filteredCreators&&this.filteredCreators.includes(e)}}},Ee=e=>(Be("data-v-f650684d"),e=e(),Re(),e),_a=Ee(()=>d("h2",null,"Credits",-1)),ya={class:"highlight-table"},ka=Ee(()=>d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"Role"),d("th",{class:"text-left"},"Person")])],-1)),Sa={class:"highlight"};function Ca(e,t,a,i,n,s){return s.sortedcreators&&s.sortedcreators.length>0?(c(),T(gt,{key:0,id:"creatorsTable"},{default:w(()=>[_a,d("table",ya,[ka,d("tbody",null,[(c(!0),P(ve,null,ne(s.sortedcreators,u=>(c(),P("tr",{key:u.pk},[d("td",null,V(s.roleName(u.role.name)),1),d("td",{class:he({filteredOn:s.isFilteredCreator(u.person.pk)})},[d("span",Sa,V(u.person.name),1)],2)]))),128))])])]),_:1})):R("",!0)}const wa=j(ga,[["render",Ca],["__scopeId","data-v-f650684d"]]),Ta=({pk:e,page:t,readLtr:a,pageCount:i})=>{if(i){if(t)t=Number(t);else if(a)t=0;else{const n=Number(i)-1;t=Math.max(n,0)}return{name:"reader",params:{pk:e,page:t}}}},we=_t("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pk:t}){const a=Q();await yt.getMetadata({group:e,pk:t},a.settings).then(i=>(this.md=i.data,!0)).catch(i=>{console.error(i),this.clearMetadata()})},clearMetadata(){this.md=void 0}}});const Va=1160,Pa=.05,Ma=250,Ba={name:"MetadataButton",components:{BookCover:$e,CloseButton:Ie,MetadatacreatorsTable:wa,MetadataTags:De,MetadataText:Ae,PlaceholderLoading:Le},props:{group:{type:String,required:!0},pk:{type:Number,required:!0},children:{type:Number,default:1}},data(){return{mdiDownload:kt,mdiTagOutline:St,dialog:!1,progress:0}},computed:{...Ct(wt,["isUserAdmin"]),...Z(Q,{twentyFourHourTime:e=>e.settings.twentyFourHourTime}),...Z(we,{md:e=>e.md,downloadFileName:e=>{const t=e.md;return e.md.path?t.path.split("/").at(-1):Tt({seriesName:t.series.name,volumeName:t.volume.name,issue:t.issue,issueSuffix:t.issueSuffix})+"."+globalThis.fileType.toLowerCase()}}),...Z(Q,{q:e=>e.settings.q}),downloadURL:function(){return Vt(this.pk)},isReadButtonShown:function(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled:function(){return this.$route.name==="browser"&&!!this.readerRoute},readButtonIcon:function(){return this.isReadButtonEnabled?Pt:Mt},readerRoute:function(){return Ta(this.md)},formattedIssue:function(){if(!((this.md.issue===null||this.md.issue===void 0)&&!this.md.issueSuffix))return Bt({issue:this.md.issue,issueSuffix:this.md.issueSuffix})},ltrText:function(){return this.md.readLtr?"Left to Right":"Right to Left"},pages:function(){let e="";if(this.md.page){const a=de.numberFormat(this.md.page,0);e+=`Read ${a} of `}const t=de.numberFormat(this.md.pageCount,0);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size:function(){return de.filesize(this.md.size)},fileType:function(){return this.md.fileType||"Unknown"}},watch:{dialog:function(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...Ce(we,["clearMetadata","loadMetadata"]),...Ce(Rt,["downloadIOSPWAFix"]),dialogOpened:function(){this.loadMetadata({group:this.group,pk:this.pk}),this.startProgress()},startProgress:function(){this.startTime=Date.now(),this.estimatedMS=Math.max(Pa,this.children/Va)*1e3,this.updateProgress()},updateProgress:function(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Ma)},formatDateTime:function(e){return It(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},Ra=e=>(Be("data-v-f9d6e29f"),e=e(),Re(),e),Ia={id:"metadataHeader"},Na={id:"metadataBookCoverWrapper"},Fa={class:"headerHalfRow"},La={class:"headerQuarterRow"},$a={class:"mdSection"},Da={key:0,class:"inlineRow"},Aa={id:"metadataBody"},Ea={class:"mdSection"},za={class:"thirdRow"},Oa={class:"mdSection"},ja={class:"quarterRow"},qa={class:"lastSmallRow"},Ua={class:"halfRow mdSection"},xa={class:"mdSection"},Ka={class:"mdSection"},Ga={class:"mdSection"},Ha={class:"mdSection"},Wa={id:"footerLinks"},Ya={id:"bottomRightButtons"},Xa={key:1,id:"placeholderContainer"},Qa=Ra(()=>d("div",{id:"placeholderTitle"},"Tags Loading",-1));function Ja(e,t,a,i,n,s){const u=Ie,o=Ae,m=$e,v=De,_=Me("MetadatacreatorsTable"),F=Le;return c(),T($t,{modelValue:n.dialog,"onUpdate:modelValue":t[5]||(t[5]=k=>n.dialog=k),fullscreen:"",transition:"dialog-bottom-transition"},{activator:w(({props:k})=>[l(oe,X({"aria-label":"tags",class:"tagButton cardControlButton",icon:"",title:"Tags",variant:"text"},k,{onClick:t[0]||(t[0]=Nt(()=>{},["prevent"]))}),{default:w(()=>[l(re,null,{default:w(()=>[O(V(n.mdiTagOutline),1)]),_:1})]),_:2},1040)]),default:w(()=>[e.md?(c(),P("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=Lt(k=>n.dialog=!1,["esc"]))},[d("header",Ia,[l(u,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[1]||(t[1]=k=>n.dialog=!1)}),e.q?(c(),T(o,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):R("",!0),d("div",Na,[l(m,{id:"bookCover","cover-pk":e.md.coverPk,group:a.group,"child-count":e.md.childCount,finished:e.md.finished},null,8,["cover-pk","group","child-count","finished"]),l(Ft,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),d("div",Fa,[l(o,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(o,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"])]),l(o,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),d("div",La,[l(o,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(o,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),l(o,{id:"issue",value:s.formattedIssue,label:"Issue",group:"c",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(o,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"])]),d("section",$a,[l(o,{value:e.md.name,label:"Title"},null,8,["value"]),e.md.year||e.md.month||e.md.day?(c(),P("div",Da,[l(o,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),l(o,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),l(o,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):R("",!0),l(o,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),d("div",Aa,[d("section",Ea,[d("div",za,[l(o,{value:s.pages,label:"Pages"},null,8,["value"]),l(o,{value:e.md.finished,label:"Finished"},null,8,["value"]),l(o,{value:s.ltrText,label:"Reading Direction"},null,8,["value"])])]),d("section",Oa,[d("div",ja,[e.md.createdAt?(c(),T(o,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):R("",!0),e.md.updatedAt?(c(),T(o,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):R("",!0),l(o,{value:s.size,label:"Size"},null,8,["value"]),l(o,{value:s.fileType,label:"File Type"},null,8,["value"])]),d("div",qa,[l(o,{group:"f",value:{pk:e.md.parentFolderPk,name:e.md.path},label:"Path"},null,8,["value"])])]),d("section",Ua,[l(o,{value:e.md.country,label:"Country"},null,8,["value"]),l(o,{value:e.md.language,label:"Language"},null,8,["value"])]),d("section",xa,[l(o,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),l(o,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),l(o,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),d("section",Ka,[l(v,{values:e.md.genres,label:"Genres"},null,8,["values"]),l(v,{values:e.md.tags,label:"Tags"},null,8,["values"]),l(v,{values:e.md.teams,label:"Teams"},null,8,["values"]),l(v,{values:e.md.characters,label:"Characters"},null,8,["values"]),l(v,{values:e.md.locations,label:"Locations"},null,8,["values"]),l(v,{values:e.md.storyArcs,label:"Story Arcs"},null,8,["values"]),l(v,{values:e.md.seriesGroups,label:"Series Groups"},null,8,["values"])]),d("section",Ga,[l(o,{value:e.md.web,label:"Web Link",link:!0},null,8,["value"]),l(o,{value:e.md.summary,label:"Summary"},null,8,["value"]),l(o,{value:e.md.comments,label:"Comments"},null,8,["value"]),l(o,{value:e.md.notes,label:"Notes"},null,8,["value"]),l(o,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])]),d("section",Ha,[l(_,{value:e.md.creators},null,8,["value"])])]),d("footer",Wa,[a.group==="c"?(c(),T(oe,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:s.download},{default:w(()=>[a.group==="c"?(c(),T(re,{key:0},{default:w(()=>[O(V(n.mdiDownload),1)]),_:1})):R("",!0),O(" Download ")]),_:1},8,["onClick"])):R("",!0),s.isReadButtonShown?(c(),T(oe,{key:1,to:s.readerRoute,title:"Read Comic",disabled:!s.isReadButtonEnabled},{default:w(()=>[l(re,null,{default:w(()=>[O(V(s.readButtonIcon),1)]),_:1}),O(" Read ")]),_:1},8,["to","disabled"])):R("",!0),d("span",Ya,[l(u,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[2]||(t[2]=k=>n.dialog=!1)})])])],32)):(c(),P("div",Xa,[l(u,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=k=>n.dialog=!1)}),Qa,l(F,{"model-value":n.progress,indeterminate:n.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const ll=j(Ba,[["render",Ja],["__scopeId","data-v-f9d6e29f"]]);export{Le as P,al as _,tl as a,el as b,ll as c,$e as d,Ta as g,Zt as t};
