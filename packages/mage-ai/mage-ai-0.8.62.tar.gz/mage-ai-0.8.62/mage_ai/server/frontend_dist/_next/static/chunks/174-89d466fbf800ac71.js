"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{1210:function(e,n,t){t.d(n,{Z:function(){return k}});var i=t(82394),r=t(21831),l=t(82684),u=t(47999),o=t(49894),c=t(93461),s=t(57384),d=t(12344),a=t(72454),f=t(28598);function p(e,n){var t=e.children;return(0,f.jsx)(a.HS,{ref:n,children:t})}var h=l.forwardRef(p),g=t(32063),v=t(15270),j=t(82531),x=t(66166),Z=t(3055),b=t(49125),m=t(91427),_=t(24141);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){var n,t=e.after,i=e.afterHidden,p=e.afterWidth,C=e.afterWidthOverride,k=e.before,P=e.beforeWidth,A=e.breadcrumbs,y=e.children,I=e.errors,O=e.headerMenuItems,w=e.navigationItems,T=e.setErrors,S=e.subheaderChildren,N=e.title,R=e.uuid,M=(0,_.i)().width,B="dashboard_after_width_".concat(R),D="dashboard_before_width_".concat(R),H=(0,l.useRef)(null),L=(0,l.useState)(C?p:(0,m.U2)(B,p)),V=L[0],z=L[1],q=(0,l.useState)(!1),F=q[0],U=q[1],W=(0,l.useState)(k?Math.max((0,m.U2)(D,P),13*b.iI):null),Y=W[0],K=W[1],J=(0,l.useState)(!1),Q=J[0],X=J[1],$=(0,l.useState)(null)[1],G=j.ZP.projects.list({},{revalidateOnFocus:!1}).data,ee=null===G||void 0===G?void 0:G.projects,ne=[];A?ne.push.apply(ne,(0,r.Z)(A)):(null===ee||void 0===ee?void 0:ee.length)>=1&&ne.push.apply(ne,[{label:function(){var e;return null===(e=ee[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return N}}]),(0,l.useEffect)((function(){null===H||void 0===H||!H.current||F||Q||null===$||void 0===$||$(H.current.getBoundingClientRect().width)}),[F,V,Q,Y,H,$,M]),(0,l.useEffect)((function(){F||(0,m.t8)(B,V)}),[i,F,V,B]),(0,l.useEffect)((function(){Q||(0,m.t8)(D,Y)}),[Q,Y,D]);var te=(0,x.Z)(p);return(0,l.useEffect)((function(){C&&te!==p&&z(p)}),[C,p,te]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Z,{title:N}),(0,f.jsx)(d.Z,{breadcrumbs:ne,menuItems:O,project:null===ee||void 0===ee?void 0:ee[0],version:null===ee||void 0===ee||null===(n=ee[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(a.Nk,{children:[0!==(null===w||void 0===w?void 0:w.length)&&(0,f.jsx)(a.lm,{children:(0,f.jsx)(v.Z,{navigationItems:w})}),(0,f.jsx)(c.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(g.Z,{after:t,afterHeightOffset:Z.Mz,afterHidden:i,afterMousedownActive:F,afterWidth:V,before:k,beforeHeightOffset:Z.Mz,beforeMousedownActive:Q,beforeWidth:a.k1+(k?Y:0),hideAfterCompletely:!0,leftOffset:k?a.k1:null,mainContainerRef:H,setAfterMousedownActive:U,setAfterWidth:z,setBeforeMousedownActive:X,setBeforeWidth:K,children:[S&&(0,f.jsx)(h,{children:S}),y]})})]}),I&&(0,f.jsx)(u.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===T||void 0===T?void 0:T(null)},children:(0,f.jsx)(o.Z,E(E({},I),{},{onClose:function(){return null===T||void 0===T?void 0:T(null)}}))})]})}},97225:function(e,n,t){var i=t(75582),r=t(12691),l=t.n(r),u=t(82684),o=t(83455),c=t(34376),s=t(60328),d=t(47999),a=t(67971),f=t(10919),p=t(93348),h=t(62609),g=t(86673),v=t(58180),j=t(19711),x=t(82531),Z=t(10503),b=t(49125),m=t(45838),_=t(9736),C=t(96510),E=t(66653),k=t(28598);n.Z=function(e){var n=e.fetchPipelineSchedules,t=e.highlightRowOnHover,r=e.includeCreatedAtColumn,P=e.includePipelineColumn,A=e.pipeline,y=e.pipelineSchedules,I=e.selectedSchedule,O=e.setErrors,w=e.setSelectedSchedule,T=e.stickyHeader,S=null===A||void 0===A?void 0:A.uuid,N=(0,c.useRouter)(),R=(0,u.useRef)({}),M=(0,u.useState)(null),B=M[0],D=M[1],H=(0,u.useState)(0),L=H[0],V=H[1],z=(0,u.useState)(0),q=z[0],F=z[1],U=(0,o.Db)((function(e){return x.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,C.wD)(e,{callback:function(){n()},onErrorCallback:function(e,n){return O({errors:n,response:e})}})}}),W=(0,i.Z)(U,1)[0],Y=(0,o.Db)((function(e){return x.ZP.pipeline_schedules.useDelete(e)()}),{onSuccess:function(e){return(0,C.wD)(e,{callback:function(){n(),S?N.push("/pipelines/[pipeline]/triggers","/pipelines/".concat(S,"/triggers")):n()},onErrorCallback:function(e,n){return O({errors:n,response:e})}})}}),K=(0,i.Z)(Y,1)[0],J=[{label:function(){return""},uuid:"action"},{uuid:"Status"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Latest run status"},{uuid:"Logs"}];(0,_.Ct)()||J.push({label:function(){return""},uuid:"edit/delete"});var Q=[null,1,1,3,1,null,null,null,null];return P&&(J.splice(2,0,{uuid:"Pipeline"}),Q.splice(2,0,2)),r&&(J.splice(3,0,{uuid:"Created at"}),Q.splice(3,0,null)),(0,k.jsx)(m.cl,{overflowVisible:!0,children:0===y.length?(0,k.jsx)(g.Z,{px:3,py:1,children:(0,k.jsx)(j.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No triggers available"})}):(0,k.jsx)(v.Z,{columnFlex:Q,columns:J,highlightRowOnHover:t,isSelectedRow:function(e){return y[e].id===(null===I||void 0===I?void 0:I.id)},onClickRow:w?function(e){return null===w||void 0===w?void 0:w(y[e])}:null,rowVerticalPadding:6,rows:y.map((function(e,n){var t,i=e.id,o=e.created_at,c=e.pipeline_runs_count,v=e.pipeline_uuid,x=e.last_pipeline_run_status,m=e.name,C=e.schedule_interval,A=e.status,y=S||v;R.current[i]=(0,u.createRef)();var I=[(0,k.jsx)(s.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,E.j)(n),W({id:e.id,status:p.fq.ACTIVE===A?p.fq.INACTIVE:p.fq.ACTIVE})},children:p.fq.ACTIVE===A?(0,k.jsx)(Z.dz,{muted:!0,size:2*b.iI}):(0,k.jsx)(Z.Py,{default:!0,size:2*b.iI})},"toggle_trigger_".concat(n)),(0,k.jsx)(j.ZP,{default:p.fq.INACTIVE===A,monospace:!0,success:p.fq.ACTIVE===A,children:A},"trigger_status_".concat(n)),(0,k.jsx)(j.ZP,{default:!0,monospace:!0,children:null===(t=p.Z4[e.schedule_type])||void 0===t?void 0:t.call(p.Z4)},"trigger_type_".concat(n)),(0,k.jsx)(l(),{as:"/pipelines/".concat(y,"/triggers/").concat(i),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,k.jsx)(f.Z,{bold:!0,onClick:function(e){(0,E.j)(e),N.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(y,"/triggers/").concat(i))},sameColorAsText:!0,children:m})},"trigger_name_".concat(n)),(0,k.jsx)(j.ZP,{default:!0,monospace:!0,children:C},"trigger_frequency_".concat(n)),(0,k.jsx)(j.ZP,{default:!0,monospace:!0,children:c},"trigger_run_count_".concat(n)),(0,k.jsx)(j.ZP,{default:!0,monospace:!0,children:x||"N/A"},"latest_run_status_".concat(n)),(0,k.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return N.push("/pipelines/".concat(y,"/logs?pipeline_schedule_id[]=").concat(i))},children:(0,k.jsx)(Z.B4,{default:!0,size:2*b.iI})},"logs_button_".concat(n))];return(0,_.Ct)()||I.push((0,k.jsxs)(a.Z,{children:[(0,k.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return N.push("/pipelines/".concat(y,"/triggers/").concat(i,"/edit"))},title:"Edit",children:(0,k.jsx)(Z.I8,{default:!0,size:2*b.iI})}),(0,k.jsx)(g.Z,{mr:1}),(0,k.jsx)(s.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){var e,n,t,r;D(i),V((null===(e=R.current[i])||void 0===e||null===(n=e.current)||void 0===n?void 0:n.offsetTop)||0),F((null===(t=R.current[i])||void 0===t||null===(r=t.current)||void 0===r?void 0:r.offsetLeft)||0)},ref:R.current[i],title:"Delete",children:(0,k.jsx)(Z.rF,{default:!0,size:2*b.iI})}),(0,k.jsx)(d.Z,{onClickOutside:function(){return D(null)},open:B===i,children:(0,k.jsx)(h.Z,{danger:!0,left:(q||0)-286,onCancel:function(){return D(null)},onClick:function(){D(null),K(i)},title:"Are you sure you want to delete the trigger ".concat(m,"?"),top:(L||0)-(n<=1?40:96),width:40*b.iI})})]},"edit_delete_buttons_".concat(n))),P&&I.splice(2,0,(0,k.jsx)(j.ZP,{default:!0,monospace:!0,children:y},"pipeline_name_".concat(n))),r&&I.splice(3,0,(0,k.jsx)(j.ZP,{default:!0,monospace:!0,children:o},"created_at_".concat(n))),I})),stickyHeader:T,uuid:"pipeline-triggers"})})}},51099:function(e,n,t){t.d(n,{Q:function(){return d}});t(82684);var i=t(60328),r=t(67971),l=t(86673),u=t(10503),o=t(73899),c=t(49125),s=t(28598),d=22;n.Z=function(e){var n=e.page,t=e.maxPages,d=e.onUpdate,a=e.totalPages,f=[],p=t;if(p>a)f=Array.from({length:a},(function(e,n){return n}));else{var h=Math.floor(p/2),g=n-h;n+h>=a?(g=a-p+2,p-=2):n-h<=0?(g=0,p-=2):(p-=4,g=n-Math.floor(p/2)),f=Array.from({length:p},(function(e,n){return n+g}))}return(0,s.jsx)(s.Fragment,{children:a>0&&(0,s.jsxs)(r.Z,{alignItems:"center",children:[(0,s.jsx)(i.Z,{disabled:0===n,onClick:function(){return d(n-1)},children:(0,s.jsx)(u.Hd,{size:1.5*c.iI,stroke:"#AEAEAE"})}),!f.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){return d(0)},borderLess:!0,noBackground:!0,children:1})},0),!f.includes(1)&&(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),f.map((function(e){return(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){e!==n&&d(e)},notClickable:e===n,backgroundColor:e===n&&o.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!f.includes(a-1)&&(0,s.jsxs)(s.Fragment,{children:[!f.includes(a-2)&&(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,s.jsx)(l.Z,{ml:1,children:(0,s.jsx)(i.Z,{onClick:function(){return d(a-1)},borderLess:!0,noBackground:!0,children:a})},a-1)]}),(0,s.jsx)(l.Z,{ml:1}),(0,s.jsx)(i.Z,{disabled:n===a-1,onClick:function(){return d(n+1)},children:(0,s.jsx)(u.Kw,{size:1.5*c.iI,stroke:"#AEAEAE"})})]})})}},93348:function(e,n,t){t.d(n,{TR:function(){return a},U5:function(){return c},Xm:function(){return l},Z4:function(){return d},fq:function(){return o},kJ:function(){return s}});var i,r,l,u=t(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(l||(l={}));var o,c,s,d=(i={},(0,u.Z)(i,l.API,(function(){return"API"})),(0,u.Z)(i,l.EVENT,(function(){return"event"})),(0,u.Z)(i,l.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(o||(o={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(c||(c={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(s||(s={}));var a=(r={},(0,u.Z)(r,s.CREATED_AT,"Created at"),(0,u.Z)(r,s.NAME,"Name"),(0,u.Z)(r,s.PIPELINE,"Pipeline"),(0,u.Z)(r,s.STATUS,"Status"),(0,u.Z)(r,s.TYPE,"Type"),r)}}]);