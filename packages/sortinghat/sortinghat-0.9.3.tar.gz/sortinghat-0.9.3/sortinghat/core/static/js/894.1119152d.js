"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[894],{375:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(9953),s=n(4590),r=function(){var e=this,t=e._self._c;return t(a.Z,[t("jobs-table",{ref:"table",staticClass:"mt-md-6",attrs:{"get-jobs":e.getJobs},on:{affiliate:e.affiliate,genderize:e.genderize,unify:e.unify,recommendMatches:e.recommendMatches}}),t(s.Z,{attrs:{color:"error",text:""},model:{value:e.snackbar.isOpen,callback:function(t){e.$set(e.snackbar,"isOpen",t)},expression:"snackbar.isOpen"}},[e._v(" "+e._s(e.snackbar.text)+" ")])],1)},i=[],o=n(1907),c=n(5617),l=n(5246),u=n(680),d=n(6262),f=n(2082),p=n(6035),m=n(2327),b=n(5093),h=n(604),v=n(8933),g=(n(4916),n(5306),function(){var e=this,t=e._self._c;return t(p.Z,{staticClass:"jobs section mb-5 pa-0"},[t("header",{staticClass:"header"},[t("h4",{staticClass:"title"},[t(m.Z,{attrs:{color:"black",left:"",dense:""}},[e._v(" mdi-tray-full ")]),e._v(" Jobs ")],1),t(d.Z,{staticClass:"black--text",attrs:{depressed:"",small:"",height:"34",color:"secondary"},on:{click:function(t){t.stopPropagation(),e.openModal=!0}}},[e._v(" Add ")])],1),e.jobs.length>0?t(h.Z,{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Job ID")]),t("th",{staticClass:"text-left"},[e._v("Type")]),t("th",{staticClass:"text-left"},[e._v("Date")]),t("th",{staticClass:"text-center"},[e._v("Status")])])]),t("tbody",e._l(e.jobs,(function(n){return t("tr",{key:n.jobId},[t("td",[t(v.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(a){var s=a.on;return[t(f.Z,e._g({staticClass:"text-center clip",attrs:{outlined:"",tile:""}},s),[e._v(" "+e._s(n.jobId)+" ")])]}}],null,!0)},[t("span",[e._v(e._s(n.jobId))])])],1),t("td",{staticClass:"capitalize"},[e._v(e._s(n.jobType.replace("_"," ")))]),t("td",[e._v(e._s(e.formatDate(n.enqueuedAt)))]),t("td",{staticClass:"text-center"},[t(f.Z,{staticClass:"ma-2",attrs:{color:e.getColor(n.status),"text-color":"white"}},[e._v(" "+e._s(n.status)+" ")])],1)])})),0)]},proxy:!0}],null,!1,1611325822)}):e._e(),e.jobs.length>0?t("div",{staticClass:"text-center pa-4"},[t(b.Z,{attrs:{length:e.pageCount,"total-visible":5},on:{input:function(t){return e.getPaginatedJobs(t)}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1):t("p",{staticClass:"text-subtitle-1 pa-7"},[e._v("There are no jobs in the queue.")]),t("job-modal",e._g({attrs:{"is-open":e.openModal},on:{"update:isOpen":function(t){e.openModal=t},"update:is-open":function(t){e.openModal=t}}},e.$listeners))],1)}),x=[],Z=(n(3710),n(3385)),k=n(5223),_=n(5393),y=n(4437),C=n(6086),j=n(2269),M=n(5294),w=n(6723),O=n(5234),z=(n(2526),n(1817),function(){var e=this,t=e._self._c;return t(C.Z,{attrs:{"max-width":"550px"},on:{"click:outside":e.onClose},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[t(Z.Z,{staticClass:"section"},[t(k.EB,{staticClass:"header title"},[e._v("New job")]),t(k.ZB,{staticClass:"mt-3"},[t(M.Z,[t(y.Z,[t(w.Z,{attrs:{items:e.types,"menu-props":{offsetY:!0,maxWidth:500},label:"Type","item-text":"title",id:"type",dense:"","hide-details":"",outlined:""},scopedSlots:e._u([{key:"item",fn:function(n){n.index;var a=n.item;return[t(j.km,[t(j.V9,[e._v(" "+e._s(a.title)+" ")]),t(j.oZ,[e._v(" "+e._s(a.description)+" ")])],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),"genderize"===e.selected?t(M.Z,[t(y.Z,[t(_.Z,{attrs:{label:"Exclude individuals in RecommenderExclusionTerm list",id:"genderize_exclude"},model:{value:e.forms.genderize.exclude,callback:function(t){e.$set(e.forms.genderize,"exclude",t)},expression:"forms.genderize.exclude"}}),t(_.Z,{attrs:{label:"Disable strict name validation",id:"genderize_noStrictMatching"},model:{value:e.forms.genderize.noStrictMatching,callback:function(t){e.$set(e.forms.genderize,"noStrictMatching",t)},expression:"forms.genderize.noStrictMatching"}})],1)],1):e._e(),"unify"===e.selected?t(M.Z,[t(y.Z,[t(w.Z,{attrs:{items:["name","email","username"],"menu-props":{bottom:!0,offsetY:!0},label:"Criteria",dense:"","hide-details":"",multiple:"",outlined:""},model:{value:e.forms.unify.criteria,callback:function(t){e.$set(e.forms.unify,"criteria",t)},expression:"forms.unify.criteria"}}),t(_.Z,{attrs:{label:"Exclude individuals in RecommenderExclusionTerm list",id:"unify_exclude"},model:{value:e.forms.unify.exclude,callback:function(t){e.$set(e.forms.unify,"exclude",t)},expression:"forms.unify.exclude"}})],1)],1):e._e(),"recommendMatches"===e.selected?t(M.Z,[t(y.Z,[t(w.Z,{attrs:{items:["name","email","username"],"menu-props":{bottom:!0,offsetY:!0},label:"Criteria",dense:"","hide-details":"",multiple:"",outlined:""},model:{value:e.forms.recommendMatches.criteria,callback:function(t){e.$set(e.forms.recommendMatches,"criteria",t)},expression:"forms.recommendMatches.criteria"}}),t(_.Z,{attrs:{label:"Exclude individuals in RecommenderExclusionTerm list",id:"recommend_exclude"},model:{value:e.forms.recommendMatches.exclude,callback:function(t){e.$set(e.forms.recommendMatches,"exclude",t)},expression:"forms.recommendMatches.exclude"}})],1)],1):e._e()],1),t(k.h7,[t(O.Z),t(d.Z,{attrs:{color:"primary darken-1",text:""},on:{click:e.onClose}},[e._v(" Cancel ")]),t(d.Z,{attrs:{disabled:!e.selected,color:"primary",id:"confirm",depressed:""},on:{click:e.onSave}},[e._v(" Confirm ")])],1)],1)],1)}),S=[],$=[{title:"Affiliate",value:"affiliate",description:"Affiliate individuals to organizations using recommendations."},{title:"Genderize",value:"genderize",description:"Autocomplete the gender information of individuals using genderize.io recommendations. "},{title:"Unify",value:"unify",description:"Merge individuals by using matching recommendations."},{title:"Recommend matches",value:"recommendMatches",description:"Recommend identity matches for individuals."}],J={genderize:{exclude:!0,noStrictMatching:!1},unify:{criteria:["name","email","username"],exclude:!0},recommendMatches:{criteria:["name","email","username"],exclude:!0}};const P={name:"JobModal",props:{isOpen:{type:Boolean,required:!0},types:{type:Array,required:!1,default:function(){return $}}},data:function(){return{selected:null,forms:J}},methods:{onClose:function(){this.$emit("update:isOpen",!1),this.selected=null,this.forms=Object.assign({},this.forms,J)},onSave:function(){this.$emit(this.selected,this.forms[this.selected]),this.onClose()}}},T=P;var A=n(1001),E=(0,A.Z)(T,z,S,!1,null,"8cc9740e",null);const D=E.exports,I={name:"JobsTable",components:{JobModal:D},props:{getJobs:{type:Function,required:!0}},data:function(){return{jobs:[],page:1,pageSize:10,pageCount:1,openModal:!1}},created:function(){this.getPaginatedJobs(1)},methods:{getPaginatedJobs:function(){var e=arguments,t=this;return(0,c.Z)((0,o.Z)().mark((function n(){var a,s,r;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:t.page,s=e.length>1&&void 0!==e[1]?e[1]:t.pageSize,n.next=4,t.getJobs(a,s);case 4:r=n.sent,r&&(t.jobs=r.data.jobs.entities,t.pageCount=r.data.jobs.pageInfo.numPages,t.page=r.data.jobs.pageInfo.page);case 6:case"end":return n.stop()}}),n)})))()},getColor:function(e){return"finished"===e?"#3fa500":"failed"===e?"#f41900":"started"===e?"primary":"rgba(0, 0, 0, 0.42)"},formatDate:function(e){return new Date(e).toLocaleString()}}},q=I;var R=(0,A.Z)(q,g,x,!1,null,"22c8835b",null);const B=R.exports,Y={name:"Jobs",components:{JobsTable:B},data:function(){return{snackbar:{isOpen:!1,text:null}}},methods:{getJobs:function(e,t){var n=this;return(0,c.Z)((0,o.Z)().mark((function a(){var s;return(0,o.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,l.Ly)(n.$apollo,e,t);case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()},affiliate:function(){var e=this;return(0,c.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.ZU)(e.$apollo);case 3:e.$refs.table.getPaginatedJobs(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.snackbar=Object.assign(e.snackbar,{isOpen:!0,text:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},genderize:function(e){var t=this;return(0,c.Z)((0,o.Z)().mark((function n(){var a,s;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.exclude,s=e.noStrictMatching,n.prev=1,n.next=4,(0,u.hH)(t.$apollo,a,s);case 4:t.$refs.table.getPaginatedJobs(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},unify:function(e){var t=this;return(0,c.Z)((0,o.Z)().mark((function n(){var a,s;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.criteria,s=e.exclude,n.prev=1,n.next=4,(0,u.LU)(t.$apollo,a,s);case 4:t.$refs.table.getPaginatedJobs(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},recommendMatches:function(e){var t=this;return(0,c.Z)((0,o.Z)().mark((function n(){var a,s;return(0,o.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.criteria,s=e.exclude,n.prev=1,n.next=4,(0,u.GY)(t.$apollo,a,s);case 4:t.$refs.table.getPaginatedJobs(),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.snackbar=Object.assign(t.snackbar,{isOpen:!0,text:n.t0});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},L=Y;var U=(0,A.Z)(L,r,i,!1,null,null,null);const W=U.exports},6035:(e,t,n)=>{n.d(t,{Z:()=>i});n(7327),n(1539),n(7941),n(6755),n(2222),n(9894),n(4198),n(3210),n(9600);var a=n(144);function s(e){return a.ZP.extend({name:"v-".concat(e),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,n){var a=n.props,s=n.data,r=n.children;s.staticClass="".concat(e," ").concat(s.staticClass||"").trim();var i=s.attrs;if(i){s.attrs={};var o=Object.keys(i).filter((function(e){if("slot"===e)return!1;var t=i[e];return e.startsWith("data-")?(s.attrs[e]=t,!1):t||"string"===typeof t}));o.length&&(s.staticClass+=" ".concat(o.join(" ")))}return a.id&&(s.domProps=s.domProps||{},s.domProps.id=a.id),t(a.tag,s,r)}})}var r=n(2653);const i=s("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(e,t){var n,a=t.props,s=t.data,i=t.children,o=s.attrs;return o&&(s.attrs={},n=Object.keys(o).filter((function(e){if("slot"===e)return!1;var t=o[e];return e.startsWith("data-")?(s.attrs[e]=t,!1):t||"string"===typeof t}))),a.id&&(s.domProps=s.domProps||{},s.domProps.id=a.id),e(a.tag,(0,r.ZP)(s,{staticClass:"container",class:Array({"container--fluid":a.fluid}).concat(n||[])}),i)}})}}]);